tasks.register('configureMeson', Exec) {
    group = 'meson'

    inputs.files 'meson.build', 'cli/meson.build', 'libclod/meson.build'
    outputs.files 'build/compile_commands.json'

    commandLine('meson', 'setup', 'build')
}

tasks.register('buildMeson', Exec) {
    group = 'meson'
    dependsOn('configureMeson')

    inputs.files fileTree('cli/*'), fileTree('libclod/*')
    outputs.files 'build/cli/clod', 'build/libclod/libclod.so.*.*'

    commandLine('meson', 'compile', '-C', 'build')
}
