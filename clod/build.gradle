tasks.register('configure', Exec) {
    group = 'build'

    inputs.files 'meson.build', 'subprojects/*.wrap'
    outputs.files 'build/build.ninja', 'build/compile_commands.json'

    commandLine('meson', 'setup', 'build')
}

tasks.register('build', Exec) {
    group = 'build'
    dependsOn('configure')

    inputs.files fileTree('src')
    outputs.files 'build/clod', 'build/libclod.so.*.*', 'build/libregion.so.*.*'

    commandLine('meson', 'compile', '-C', 'build')
}
